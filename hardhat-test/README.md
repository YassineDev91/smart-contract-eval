# Hardhat Test – Runtime Validation of Generated Smart Contracts

This sub-project is part of the [smart-contract-eval](https://github.com/YassineDev91/smart-contract-eval) repository. It provides **runtime validation** for smart contracts generated by different Large Language Models (LLMs), using [Hardhat v3](https://hardhat.org/).  

The goal is to complement static evaluation metrics (SSR, SFS, CQS) with **on-chain simulation** of the full contract lifecycle.

---

## 📂 Project Structure

```
hardhat-test/
├── contracts/
│   ├── Purchase.sol              # Reference contract (from Solidity docs)
│   ├── PurchaseChatGPT.sol       # LLM-generated contract (ChatGPT)
│   ├── PurchaseClaude.sol        # LLM-generated contract (Claude)
│   ├── PurchaseDeepSeek.sol      # LLM-generated contract (DeepSeek)
│   ├── PurchaseGemini.sol        # LLM-generated contract (Gemini)
│   └── Purchase.t.sol            # Solidity test suite for runtime validation
│
├── artifacts/                    # Auto-generated by Hardhat (compiled artifacts)
├── cache/                        # Auto-generated by Hardhat (build cache)
│
├── hardhat.config.ts             # Hardhat configuration (with viaIR enabled, optimizer)
├── package.json                  # Project dependencies
├── package-lock.json             # Dependency lock file
├── tsconfig.json                 # TypeScript configuration
└── README.md                     
```

## ⚙️ Setup

1. Install dependencies:
```bash
npm install
```
2.	Compile contracts:
```bash
npx hardhat compile
```
3.	Run the test suite:
```bash
npx hardhat compile
```


## 🧪 Test Suite

The test suite (Purchase.t.sol) validates the Remote Purchase smart contract in multiple implementations:
- Initialization – Constructor behavior, even-value validation, correct state.
- confirmPurchase – Buyer confirmation logic with correct/incorrect payments.
- confirmReceived – Buyer receipt confirmation and partial refund.
- refundSeller – Final seller refund.

Each test covers:
- Reference implementation (from Solidity docs).
- LLM-generated variants (ChatGPT, Claude, DeepSeek, Gemini).