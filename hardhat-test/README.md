# Hardhat Test â€“ Runtime Validation of Generated Smart Contracts

This sub-project is part of the [smart-contract-eval](https://github.com/YassineDev91/smart-contract-eval) repository. It provides **runtime validation** for smart contracts generated by different Large Language Models (LLMs), using [Hardhat v3](https://hardhat.org/).  

The goal is to complement static evaluation metrics (SSR, SFS, CQS) with **on-chain simulation** of the full contract lifecycle.

---

## ğŸ“‚ Project Structure

```
hardhat-test/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ Purchase.sol              # Reference contract (from Solidity docs)
â”‚   â”œâ”€â”€ PurchaseChatGPT.sol       # LLM-generated contract (ChatGPT)
â”‚   â”œâ”€â”€ PurchaseClaude.sol        # LLM-generated contract (Claude)
â”‚   â”œâ”€â”€ PurchaseDeepSeek.sol      # LLM-generated contract (DeepSeek)
â”‚   â”œâ”€â”€ PurchaseGemini.sol        # LLM-generated contract (Gemini)
â”‚   â””â”€â”€ Purchase.t.sol            # Solidity test suite for runtime validation
â”‚
â”œâ”€â”€ artifacts/                    # Auto-generated by Hardhat (compiled artifacts)
â”œâ”€â”€ cache/                        # Auto-generated by Hardhat (build cache)
â”‚
â”œâ”€â”€ hardhat.config.ts             # Hardhat configuration (with viaIR enabled, optimizer)
â”œâ”€â”€ package.json                  # Project dependencies
â”œâ”€â”€ package-lock.json             # Dependency lock file
â”œâ”€â”€ tsconfig.json                 # TypeScript configuration
â””â”€â”€ README.md                     
```

## âš™ï¸ Setup

1. Install dependencies:
```bash
npm install
```
2.	Compile contracts:
```bash
npx hardhat compile
```
3.	Run the test suite:
```bash
npx hardhat compile
```


## ğŸ§ª Test Suite

The test suite (Purchase.t.sol) validates the Remote Purchase smart contract in multiple implementations:
- Initialization â€“ Constructor behavior, even-value validation, correct state.
- confirmPurchase â€“ Buyer confirmation logic with correct/incorrect payments.
- confirmReceived â€“ Buyer receipt confirmation and partial refund.
- refundSeller â€“ Final seller refund.

Each test covers:
- Reference implementation (from Solidity docs).
- LLM-generated variants (ChatGPT, Claude, DeepSeek, Gemini).